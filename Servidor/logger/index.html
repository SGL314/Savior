<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Savior</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
	<link rel="stylesheet" href="geral.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<!--sem zoom-->
</head>

<body>
	<div class="geral">
		<h1 id="id">Servidor</h1>
		<h1 id="erro" style="display: none; color: red;"></h1>
		<table>
			<tr>
				<th>seed</th>
				<th>tamanho</th>
				<th>clientes</th>
				<th>things</th>
				<th>fps</th>
				<th>touches</th>
				<th>queue</th>
				<th>th1</th>
				<th>th2</th>
				<th>d1</th>
				<th>d2</th>
			</tr>
			<tr>
				<td id="seed"></td>
				<td id="tamanho"></td>
				<td id="clientes"></td>
				<td id="things"></td>
				<td id="fps"></td>
				<td id="touches">---</td>
				<td id="queue">---</td>
				<td id="th1">---</td>
				<td id="th2">---</td>
				<td id="d1">---</td>
				<td id="d2">---</td>
			</tr>
		</table>
		<button id="newMap">Novo Mapa</button>
		<button id="checkConnection">Comm</button>
		<button id="fullScreen" onclick="fullScreen()">[+]</button>
		<button id="refresh" onclick="refresh()">REF</button>
		<button id="theme" onclick="toggleTheme()">Black</button>

		<div style="display: flex; flex-direction: row;">
			<!-- 0 -->
			<div >
				<pre id="log"></pre>
				<pre id="chunk"></pre>
			</div>
			<div >
				<pre id="logEsp0"></pre>
				<pre id="logEsp1"></pre>
				<pre id="logEsp2"></pre>
			</div>
			<div>
				<pre id="server"></pre>
			</div>
		</div>

		<!-- <pre id="log"></pre> -->
		<script>
			// theme.js
			document.addEventListener('DOMContentLoaded', () => {
				const toggleButton = document.getElementById('theme');
				const body = document.body;

				// 1. Verificar se o usuário já tem uma preferência salva (opcional)
				const savedTheme = localStorage.getItem('theme');
				if (savedTheme === 'dark') {
					body.classList.add('dark-theme');
				}

				// 2. Adicionar o evento de clique ao botão

			});
			function toggleTheme() {
				const body = document.body;
				// Alterna a classe 'dark-theme' no body
				body.classList.toggle('dark-theme');

				// 3. Salvar a preferência do usuário (opcional)
				if (body.classList.contains('dark-theme')) {
					localStorage.setItem('theme', 'dark');
					document.getElementById("theme").textContent = "White";
				} else {
					localStorage.setItem('theme', 'light');
					document.getElementById("theme").textContent = "Black";
				}
			}
			const log = (msg, add) => {
				// return;
				if (!add) document.getElementById("log").textContent = JSON.stringify(msg) + "\n";
				else document.getElementById("log").textContent += JSON.stringify(msg) + "\n";
			};
			const logEsp = (msg, add,local) => {
				// return;
				if (!add) document.getElementById("logEsp"+local).textContent = JSON.stringify(msg) + "\n";
				else document.getElementById("logEsp"+local).textContent += JSON.stringify(msg) + "\n";
			};
			//
			var logsServer = [], tetoLogsServer = 10;
			const logServer = (msg) => {
				// return;
				add = true;
				// if (!add) document.getElementById("log").textContent = JSON.stringify(msg) + "\n";
				logsServer.push(JSON.stringify(msg) + "\n");
				if (logsServer.length > tetoLogsServer) logsServer.shift();
				document.getElementById("server").textContent = "";
				logsServer.forEach(e => document.getElementById("server").textContent += e);
			};
			

			function entrarTelaCheia(document) {
				if (document.requestFullscreen) {
					document.requestFullscreen();
				} else if (document.webkitRequestFullscreen) { // Safari/Chrome mais antigos
					document.webkitRequestFullscreen();
				} else if (document.msRequestFullscreen) { // IE/Edge mais antigos
					document.msRequestFullscreen();
				}
			}
			function sairTelaCheia() {
				if (document.exitFullscreen) {
					document.exitFullscreen();
				} else if (document.webkitExitFullscreen) { // Safari/Chrome mais antigos
					document.webkitExitFullscreen();
				} else if (document.msExitFullscreen) { // IE/Edge mais antigos
					document.msExitFullscreen();
				}
			}

			// Para colocar o corpo (body) inteiro em tela cheia:
			let screenIsFull = false;
			function fullScreen() {
				if (!screenIsFull) {
					entrarTelaCheia(document.documentElement);
					screenIsFull = true;
					document.getElementById("fullScreen").textContent = "[-]";
				} else {
					sairTelaCheia(document);
					screenIsFull = false;
					document.getElementById("fullScreen").textContent = "[+]";
				}
			}
			document.getElementById('refresh').addEventListener('click', function () {
				location.reload();
			});
			// toggleTheme(); // black no incio
			// toggleTheme(); // black no incio
		</script>
		<!-- <script src="./Auxs/auxiliar.js" defer></script> -->
		<script src="getServer.js"></script>
		<div id="localCanvas"></div>
		
	</div>
</body>

</html>